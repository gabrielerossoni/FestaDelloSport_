# Festa dello Sport ‚Äî Sito ufficiale e Dashboard Organizzatore üö©

[![GitHub Actions](https://img.shields.io/github/actions/workflow/status/gabrielerossoni/FestaDelloSport_/ci.yml)](https://github.com/gabrielerossoni/FestaDelloSport_/actions)
[![License](https://img.shields.io/github/license/gabrielerossoni/FestaDelloSport_)](https://github.com/gabrielerossoni/FestaDelloSport_/blob/main/LICENSE)
[![Issues](https://img.shields.io/github/issues/gabrielerossoni/FestaDelloSport_)](https://github.com/gabrielerossoni/FestaDelloSport_/issues)

Benvenuti nella documentazione del progetto Festa dello Sport di Capralba. Questo repository contiene il sito web pubblico statico e una dashboard per gli organizzatori, con backend Python Flask per gestire eventi e prenotazioni.

---

## Descrizione del Progetto ‚ú®

La Festa dello Sport √® un evento comunitario annuale che celebra lo sport, il cibo e il divertimento. Questo progetto fornisce:

- **Sito Pubblico**: Piattaforma statica per informazioni sugli eventi, menu, prenotazioni tavoli e feedback.
- **Dashboard Organizzatore**: Interfaccia web per gestire eventi, visualizzare statistiche e amministrare l'evento.
- **Backend API**: Servizi REST per prenotazioni, feedback, gestione eventi e autenticazione.

Il frontend √® costruito con HTML, CSS e JavaScript puro, mentre il backend utilizza Python Flask con database PostgreSQL.

---

## Funzionalit√† ‚úÖ

### Sito Pubblico

- Visualizzazione programma eventi
- Prenotazione tavoli online
- Invio feedback e valutazioni
- Galleria immagini e informazioni evento
- Design responsivo e accessibile

### Dashboard Organizzatore

- **Login OAuth Google**: Autenticazione sicura per amministratori (solo email verificate)
- **Gestione Eventi**: CRUD completo (Crea, Leggi, Aggiorna, Cancella eventi)
  - Nome evento, data, luogo, descrizione
- **Gestione Menu**: CRUD per piatti del ristorante
  - Nome, categoria, prezzo, descrizione, disponibilit√†
- **Menu Laterale**: Navigazione intuitiva con sezioni Dashboard, Eventi, Menu, Statistiche
- **Lista con Tabelle**: Interfacce tabellari con pulsanti azione per modifica/cancellazione
- **Solo Admin Verificati**: Accesso limitato a email pre-autorizzate nella tabella `admin_emails`

### Backend API

- RESTful API per tutte le operazioni
- Autenticazione basata su sessioni
- Gestione database PostgreSQL
- CORS configurato per sicurezza

---

## Struttura delle Cartelle üìÅ

```
FestaDelloSport_/
‚îú‚îÄ‚îÄ index.html              # Pagina principale sito pubblico
‚îú‚îÄ‚îÄ privacy.html            # Pagina privacy
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ images/             # Immagini e risorse statiche
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ backend.py          # Applicazione Flask principale
‚îÇ   ‚îú‚îÄ‚îÄ backup_db.py        # Script backup database
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt    # Dipendenze Python
‚îÇ   ‚îú‚îÄ‚îÄ start_production.bat # Script avvio produzione
‚îÇ   ‚îî‚îÄ‚îÄ backups/            # Cartella backup
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ style.css           # Stili sito pubblico
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ config.js           # Configurazioni JavaScript
‚îÇ   ‚îú‚îÄ‚îÄ script.js           # Script sito pubblico
‚îÇ   ‚îî‚îÄ‚îÄ sw.js               # Service Worker
‚îú‚îÄ‚îÄ favicon/                # Icone e manifest
‚îî‚îÄ‚îÄ README.md               # Questa documentazione
```

---

## Installazione e Dipendenze üõ†Ô∏è

### Prerequisiti

- Python 3.8+
- PostgreSQL database
- Node.js (opzionale per sviluppo frontend)

### Installazione Backend

1. Clona il repository:

   ```bash
   git clone https://github.com/gabrielerossoni/FestaDelloSport_.git
   cd FestaDelloSport_
   ```

2. Installa le dipendenze Python:

   ```bash
   cd backend
   pip install -r requirements.txt
   ```

3. Configura le variabili d'ambiente:

   ```bash
   export DATABASE_URL="postgresql://user:password@localhost:5432/festa_sport"
   export FLASK_ENV="development"
   export GOOGLE_CLIENT_ID="your_google_client_id"
   export GOOGLE_CLIENT_SECRET="your_google_client_secret"
   ```

   **IMPORTANTE**: Per istruzioni dettagliate su come ottenere le credenziali Google OAuth, vedi `backend/setup_google_oauth.md`

4. Avvia il backend:

   ```bash
   python backend.py
   ```

### Installazione Frontend

Il frontend √® statico e non richiede installazione speciale. Per sviluppo locale:

```bash
# Usa un server HTTP locale (es. Live Server in VS Code)
# Oppure apri index.html direttamente nel browser
```

### Database

Il progetto utilizza PostgreSQL per la gestione dei dati. Le tabelle principali includono:

- **organizzatori**: Credenziali e autenticazione amministratori
- **eventi**: Informazioni eventi (nome, data, luogo, descrizione)
- **prenotazioni**: Dati prenotazioni tavoli con contatti
- **feedback**: Valutazioni e commenti visitatori

Il backend crea automaticamente lo schema al primo avvio. Per reset del database:

```bash
# Nel database PostgreSQL
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
```

Quindi riavvia il backend per reinizializzare le tabelle.

---

## Configurazione Sicurezza üîí

- **Variabili d'ambiente**: Usa file `.env` locale (non commitare)
- **Password**: Sempre hashate con `werkzeug.security`
- **CORS**: Configurato solo per domini autorizzati
- **Session**: Cookie sicuri in produzione
- **Input Validation**: Validazione lato client e server

---

## License üìÑ

Questo progetto √® distribuito sotto licenza MIT. Vedi [LICENSE](LICENSE) per dettagli.

Il backend inizializza automaticamente le tabelle al primo avvio. Assicurati che DATABASE_URL sia configurata correttamente.

---

## Uso della Dashboard Organizzatore üéõÔ∏è

1. **Accesso**: Vai a `/dashboard/login.html` e clicca "Login con Google"
2. **Verifica Email**: Solo email presenti nella tabella `admin_emails` possono accedere
3. **Dashboard Principale**: Panoramica eventi, prenotazioni e statistiche
4. **Gestione Eventi**:
   - Visualizza lista eventi in tabella
   - Crea nuovo evento con form (nome, data, luogo, descrizione)
   - Modifica eventi esistenti
   - Cancella eventi non pi√π necessari
5. **Gestione Menu**:
   - Aggiungi/modifica piatti del ristorante
   - Gestisci categorie, prezzi, descrizioni
   - Imposta disponibilit√†
6. **Navigazione**: Usa il menu laterale per spostarti tra sezioni

### Configurazione Admin

Per aggiungere amministratori autorizzati, esegui nel database PostgreSQL:

```sql
INSERT INTO admin_emails (email, nome) VALUES
('admin@tudominio.com', 'Nome Admin'),
('organizzatore@festasport.it', 'Organizzatore Festa');
```

**Nota**: Solo gli account Google con queste email possono accedere alla dashboard admin.

### Setup Google OAuth

Per abilitare il login OAuth Google:

1. Crea un progetto su [Google Cloud Console](https://console.cloud.google.com/)
2. Abilita Google+ API e OAuth 2.0
3. Crea credenziali OAuth 2.0 per applicazione web
4. Aggiungi URI di reindirizzamento: `http://localhost:3001/login/google/callback`
5. Imposta variabili ambiente `GOOGLE_CLIENT_ID` e `GOOGLE_CLIENT_SECRET`

Vedi `backend/setup_google_oauth.md` per istruzioni dettagliate.

---

## Suggerimenti per Contributori ü§ù

- Segui le convenzioni di codice Python (PEP 8)
- Aggiungi commenti chiari alle funzioni nuove
- Testa le modifiche sia su desktop che mobile
- Crea issue per nuove funzionalit√† o bug
- Usa branch feature per contributi significativi
- Mantieni la sicurezza: non committare credenziali

### Workflow Git

1. Fork il repository
2. Crea un branch feature: `git checkout -b feature/nome-feature`
3. Committa le modifiche: `git commit -m "Aggiunta feature"`
4. Push e crea Pull Request

---

## Donazioni üíù

Se questo progetto ti √® utile, considera una donazione per supportare lo sviluppo:

- **PayPal**: [paypal.me/gabrielerossoni0](https://paypal.me/gabrielerossoni0)
- **GitHub Sponsors**: [github.com/sponsors/gabrielerossoni](https://github.com/sponsors/gabrielerossoni)

Ogni contributo aiuta a mantenere e migliorare il progetto! üôè

---

## Contatti ‚úâÔ∏è

Per problemi, suggerimenti o contributi:

- Email: `gby.rosso7@gmail.com`
- GitHub Issues: [github.com/gabrielerossoni/FestaDelloSport_/issues](https://github.com/gabrielerossoni/FestaDelloSport_/issues)

---

Grazie per il contributo e buona navigazione! üéâ
