# Backend - Festa dello Sport

## Setup

### 1. Installa le dipendenze

```bash
pip install -r requirements.txt
```

### 2. Avvia in sviluppo

```bash
python backend2.py
```

### 3. Avvia in produzione

Con Gunicorn (raccomandato):

```bash
gunicorn -w 4 -b 0.0.0.0:3001 backend2:app
```

Oppure usa lo script:

```bash
# Linux/Mac
./start_production.sh

# Windows
start_production.bat
```

## Backup Database

### Backup manuale

Esegui il backup manualmente:

```bash
python backup_db.py
```

### Backup automatici

Per backup automatici, configura un cron job (Linux/Mac):

```bash
# Backup ogni giorno alle 2:00 AM
0 2 * * * cd /path/to/backend && python backup_db.py
```

## Variabili d'Ambiente

- `FLASK_ENV`: `development` o `production` (default: `development`)
- `PORT`: Porta del server (default: 3001)

## Note Produzione

- Usa sempre Gunicorn in produzione (non `python backend2.py`)
- Configura CORS in `backend2.py` con i domini autorizzati
- Esegui backup regolari del database
- Monitora i log per errori
- In produzione, il logging dettagliato Ã¨ disabilitato per sicurezza

## Rate Limiting

Il backend include rate limiting per proteggere gli endpoint critici:

- `/api/prenota`: 5 richieste per minuto per IP
- `/api/feedback`: 10 richieste per minuto per IP
- Limite globale: 200 richieste per ora per IP

## Sicurezza

- Input sanitization automatica per tutti i campi
- Validazione robusta di telefono, date e dati
- Logging limitato in produzione (solo errori)
- CORS configurato per domini specifici
